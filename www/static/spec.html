<h1 id="oak-programming-language-documentation">Oak Programming Language
Documentation</h1>
<h2 id="syntax">Syntax</h2>
<p>Oak, like <a href="https://dotink.co">Ink</a>, has automatic comma
insertion at end of lines. This means if a comma can be inserted at the
end of a line, it will automatically be inserted.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode go"><code class="sourceCode go"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>program <span class="op">:=</span> expr<span class="op">*</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>expr <span class="op">:=</span> literal <span class="op">|</span> identifier <span class="op">|</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    assignment <span class="op">|</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    propertyAccess <span class="op">|</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    unaryExpr <span class="op">|</span> binaryExpr <span class="op">|</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    prefixCall <span class="op">|</span> infixCall <span class="op">|</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    ifExpr <span class="op">|</span> withExpr <span class="op">|</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    block</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>literal <span class="op">:=</span> nullLiteral <span class="op">|</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    numberLiteral <span class="op">|</span> stringLiteral <span class="op">|</span> atomLiteral <span class="op">|</span> boolLiteral <span class="op">|</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    listLiteral <span class="op">|</span> objectLiteral <span class="op">|</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    fnLiterael</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>nullLiteral <span class="op">:=</span> <span class="ch">&#39;?&#39;</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>numberLiteral <span class="op">:=</span> \d<span class="op">+</span> <span class="op">|</span> \d<span class="op">*</span> <span class="ch">&#39;.&#39;</span> \d<span class="op">+</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>stringLiteral <span class="op">:=</span> <span class="co">// single quoted string with standard escape sequences + \x00 syntax</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>atomLiteral <span class="op">:=</span> <span class="ch">&#39;:&#39;</span> <span class="op">+</span> identifier</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>boolLiteral <span class="op">:=</span> <span class="ch">&#39;true&#39;</span> <span class="op">|</span> <span class="ch">&#39;false&#39;</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>listLiteral <span class="op">:=</span> <span class="ch">&#39;[&#39;</span> <span class="op">(</span> expr <span class="ch">&#39;,&#39;</span> <span class="op">)*</span> <span class="ch">&#39;]&#39;</span> <span class="co">// last comma optional</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>objectLiteral <span class="op">:=</span> <span class="ch">&#39;{&#39;</span> <span class="op">(</span> expr <span class="ch">&#39;:&#39;</span> expr <span class="ch">&#39;,&#39;</span> <span class="op">)*</span> <span class="ch">&#39;}&#39;</span> <span class="co">// last comma optional</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>fnLiteral <span class="op">:=</span> <span class="ch">&#39;fn&#39;</span> <span class="ch">&#39;(&#39;</span> <span class="op">(</span> identifier <span class="ch">&#39;,&#39;</span> <span class="op">)*</span> <span class="op">(</span>identifier <span class="ch">&#39;...&#39;</span><span class="op">)?</span> <span class="ch">&#39;)&#39;</span> expr</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>identifier <span class="op">:=</span> \w_ <span class="op">(</span>\w\d_<span class="op">?!)*</span> <span class="op">|</span> _</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>assignment <span class="op">:=</span> <span class="op">(</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>    identifier <span class="op">[</span><span class="ch">&#39;:=&#39;</span> <span class="ch">&#39;&lt;-&#39;</span><span class="op">]</span> expr <span class="op">|</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>    listLiteral <span class="op">[</span><span class="ch">&#39;:=&#39;</span> <span class="ch">&#39;&lt;-&#39;</span><span class="op">]</span> expr <span class="op">|</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>    objectLiteral <span class="op">[</span><span class="ch">&#39;:=&#39;</span> <span class="ch">&#39;&lt;-&#39;</span><span class="op">]</span> expr</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="op">)</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>propertyAccess <span class="op">:=</span> identifier <span class="op">(</span><span class="ch">&#39;.&#39;</span> identifier<span class="op">)+</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>unaryExpr <span class="op">:=</span> <span class="op">(</span><span class="ch">&#39;!&#39;</span> <span class="op">|</span> <span class="ch">&#39;-&#39;</span><span class="op">)</span> expr</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>binaryExpr <span class="op">:=</span> expr <span class="op">(+</span> <span class="op">-</span> <span class="op">*</span> <span class="op">/</span> <span class="op">%</span> <span class="op">^</span> <span class="op">&amp;</span> <span class="op">|</span> <span class="op">&gt;</span> <span class="op">&lt;</span> <span class="op">=</span> <span class="op">&gt;=</span> <span class="op">&lt;=</span> <span class="op">&lt;&lt;)</span> binaryExpr</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>prefixCall <span class="op">:=</span> expr <span class="ch">&#39;(&#39;</span> <span class="op">(</span>expr <span class="ch">&#39;,&#39;</span><span class="op">)*</span> <span class="ch">&#39;)&#39;</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>infixCall <span class="op">:=</span> expr <span class="ch">&#39;|&gt;&#39;</span> prefixCall</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>ifExpr <span class="op">:=</span> <span class="ch">&#39;if&#39;</span> expr<span class="op">?</span> <span class="ch">&#39;{&#39;</span> ifClause<span class="op">*</span> <span class="ch">&#39;}&#39;</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>ifClause <span class="op">:=</span> expr <span class="ch">&#39;-&gt;&#39;</span> expr <span class="ch">&#39;,&#39;</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>withExpr <span class="op">:=</span> <span class="ch">&#39;with&#39;</span> prefixCall fnLiteral</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>block <span class="op">:=</span> <span class="ch">&#39;{&#39;</span> expr<span class="op">+</span> <span class="ch">&#39;}&#39;</span> <span class="op">|</span> <span class="ch">&#39;(&#39;</span> expr<span class="op">*</span> <span class="ch">&#39;)&#39;</span></span></code></pre></div>
<h3 id="ast-node-types">AST node types</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>nullLiteral</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>stringLiteral</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>numberLiteral</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>boolLiteral</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>atomLiteral</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>listLiteral</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>objectLiteral</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>fnLiteral</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>identifier</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>assignment</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>propertyAccess</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>unaryExpr</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>binaryExpr</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>fnCall</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>ifExpr</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>block</span></code></pre></div>
<h2 id="language-functions">Language Functions</h2>
<ul>
<li><code>import(path)</code>: Imports a module located at the specified
<code>path</code>.</li>
<li><code>string(x)</code>: Converts the argument <code>x</code> to a
string.</li>
<li><code>int(x)</code>: Converts the argument <code>x</code> to an
integer.</li>
<li><code>float(x)</code>: Converts the argument <code>x</code> to a
floating-point number.</li>
<li><code>atom(c)</code>: Creates an atom with the specified character
<code>c</code>.</li>
<li><code>codepoint(c)</code>: Returns the Unicode code point of the
character <code>c</code>.</li>
<li><code>char(n)</code>: Converts the Unicode code point <code>n</code>
to a character.</li>
<li><code>type(x)</code>: Returns the type of the argument
<code>x</code>.</li>
<li><code>len(x)</code>: Returns the length of the argument
<code>x</code>.</li>
<li><code>keys(x)</code>: Returns an array of keys of the argument
<code>x</code>.</li>
</ul>
<h2 id="os-functions">OS Functions</h2>
<ul>
<li><code>args()</code>: Returns command-line arguments as an array of
strings.</li>
<li><code>env()</code>: Returns the environment variables as an
object.</li>
<li><code>time()</code>: Returns the current time as a float.</li>
<li><code>nanotime()</code>: Returns the current time in nanoseconds as
an integer.</li>
<li><code>exit(code)</code>: Exits the program with the specified exit
code.</li>
<li><code>rand()</code>: Generates a random floating-point number
between 0 and 1.</li>
<li><code>srand(length)</code>: Seeds the random number generator with
the specified length.</li>
<li><code>wait(duration)</code>: Pauses the program execution for the
specified duration.</li>
<li><code>exec(path, args, stdin)</code>: Executes a command specified
by <code>path</code> with the given <code>args</code> and optional
standard input <code>stdin</code>. Returns stdout, stderr, and end
events.</li>
</ul>
<h2 id="io-interfaces">I/O Interfaces</h2>
<ul>
<li><p><code>input()</code>: Reads input from the standard
input.</p></li>
<li><p><code>print()</code>: Writes output to the standard
output.</p></li>
<li><p><code>ls(path)</code>: Lists files and directories in the
specified path.</p></li>
<li><p><code>mkdir(path)</code>: Creates a directory at the specified
path.</p></li>
<li><p><code>rm(path)</code>: Removes the file or directory at the
specified path.</p></li>
<li><p><code>stat(path)</code>: Retrieves file or directory information
at the specified path.</p></li>
<li><p><code>open(path, flags, perm)</code>: Opens a file at the
specified path with the given flags and permissions.</p></li>
<li><p><code>close(fd)</code>: Closes the file descriptor
<code>fd</code>.</p></li>
<li><p><code>read(fd, offset, length)</code>: Reads data from the file
descriptor <code>fd</code> starting at the specified <code>offset</code>
and reading <code>length</code> bytes.</p></li>
<li><p><code>write(fd, offset, data)</code>: Writes data to the file
descriptor <code>fd</code> starting at the specified
<code>offset</code>.</p></li>
<li><p><code>close := listen(host, handler)</code>: Listens for incoming
connections on the specified <code>host</code> and handles them with the
provided <code>handler</code> function.</p></li>
<li><p><code>req(data)</code>: Sends an HTTP request with the provided
data.</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode go"><code class="sourceCode go"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Req syntax:</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">// ---</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>req<span class="op">({</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  url<span class="op">:</span> <span class="ch">&#39;&#39;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  method<span class="op">:</span> <span class="ch">&#39;GET&#39;</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  headers<span class="op">:</span> <span class="op">{}</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  body<span class="op">:</span> _</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="op">})</span></span></code></pre></div></li>
</ul>
<h1 id="math-functions">Math Functions</h1>
<ul>
<li>Trigonometric functions
<ul>
<li><code>sin(n)</code>: Calculates the sine of the angle
<code>n</code>.</li>
<li><code>cos(n)</code>: Calculates the cosine of the angle
<code>n</code>.</li>
<li><code>tan(n)</code>: Calculates the tangent of the angle
<code>n</code>.</li>
</ul></li>
<li>Inverse Trigonometric functions
<ul>
<li><code>asin(n)</code>: Calculates the arcsine of the value
<code>n</code>.</li>
<li><code>acos(n)</code>: Calculates the arccosine of the value
<code>n</code>.</li>
<li><code>atan(n)</code>: Calculates the arctangent of the value
<code>n</code>.</li>
</ul></li>
<li>Power and logarithmic functions
<ul>
<li><code>pow(b, n)</code>: Raises the base <code>b</code> to the power
of <code>n</code>.</li>
<li><code>log(b, n)</code>: Calculates the logarithm of <code>n</code>
with base <code>b</code>.</li>
</ul></li>
</ul>
